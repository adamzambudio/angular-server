<div class="property-detail-container" *ngIf="property">
  <div class="container mt-5">
    <h2 class="property-title">{{ property.title }}</h2>
    <p class="text-muted">{{ property.address }}</p>
    <h4 class="property-price">Precio: {{ property.price }}€</h4>

    <!-- Carrusel de imágenes -->
    <div id="propertyCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
      <div class="carousel-inner rounded shadow-sm">
        <div 
          class="carousel-item" 
          *ngFor="let img of property.images; let i = index"
          [class.active]="i === 0"
        >
          <img [src]="img.url" class="d-block w-100 property-image" alt="Imagen de la propiedad">
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#propertyCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#propertyCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
      </button>
    </div>

    <p class="property-description">{{ property.description }}</p>

    <div class="action-buttons">
      <button class="btn-primary" (click)="comprarProperty()">Comprar</button>
      <button class="btn-contact" (click)="toggleContactForm()">Contactar</button>
    </div>
  </div>
</div>



<div class="modal-backdrop" *ngIf="showContactForm" (click)="toggleContactForm()"></div>
<div class="modal" *ngIf="showContactForm">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h3>Contactar al vendedor</h3>
    <p style="color: red;">(Campos obligatorios) *</p>

    <form (ngSubmit)="submitContactForm()" #formRef="ngForm" novalidate>
      <div class="form-group">
        <label for="nombre">Nombre completo: <span class="required">*</span></label>
        <input type="text" id="nombre" name="nombre" [(ngModel)]="contactForm.nombre" required/>
      </div>

      <div class="form-group">
        <label for="telefono">Teléfono: <span class="required">*</span></label>
        <input type="tel" id="telefono" name="telefono" [(ngModel)]="contactForm.telefono" required pattern="[0-9]{9}"/>
        <small style="color: gray;">Solo números, mínimo 9 dígitos</small>
      </div>

      <div class="form-group">
        <label for="email">Correo electrónico: <span class="required">*</span></label>
        <input type="email" id="email" name="email" [(ngModel)]="contactForm.email" required/>
      </div>

      <div class="form-group">
        <label for="mensaje">Mensaje: <span class="required">*</span></label>
        <textarea id="mensaje" name="mensaje" rows="4" [(ngModel)]="contactForm.mensaje" required placeholder="Escribe tu mensaje aquí"></textarea>
      </div>

      <div class="form-buttons">
        <button type="submit" class="btn-primary">Enviar</button>
        <button type="button" class="btn-contact" (click)="toggleContactForm()">Cancelar</button>
      </div>
    </form>
  </div>
</div>
